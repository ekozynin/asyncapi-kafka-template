asyncapi: '2.1.0'
info:
  title: Content
  version: '0.0.1'
  description: |
    Describes Content topology of the content platform
  license:
    name: TODO
    url: 'https://TODO/licenses/LICENSE-2.0'

servers:
  local:
    url: localhost:9092
    protocol: kafka
    protocolVersion: 2.6.0
    description: local kafka cluster for development
    x-schema-registry-url: http://localhost:8081
  dev:
    url: dev.com:9092
    protocol: kafka
    protocolVersion: 2.6.0
    description: local kafka cluster for development
    x-schema-registry-url: http://dev.com:8081

channels:
  content.fact.content-spaces:
    bindings:
      kafka:
        valueSchema:
          $ref: '../avro/ContentSpaceFact.avsc'
        partitions: 9
        replicas: 1
        configs:
          cleanup.policy: compact
          delete.retention.ms: 0
          confluent.value.schema.validation: 'true'

  content.log.content-spaces:
    bindings:
      kafka:
        valueSchema:
          $ref: '../avro/ContentSpaceFact.avsc'
        partitions: 5
        replicas: 1
        configs:
          cleanup.policy: delete
          retention.ms: -1
          confluent.value.schema.validation: 'true'

components:
  messages:
    ContentSpaceFact:
      title: Content Space Information
      summary: The summary of content space information
      schemaFormat: application/vnd.apache.avro;version=1.9.0
      contentType: application/octet-stream
      payload:
        $ref: '../avro/ContentSpaceFact.avsc'
